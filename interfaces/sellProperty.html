<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sakancom</title>
  <link href="../resources/public_html/assets/img/loyintlogos/logow.svg" rel="icon">
  <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css'>
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css'>
  <link rel="stylesheet" href="../multi-step-form/dist/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
<nav class="navbar navbar-default navbar-trans navbar-expand-lg fixed-top">
  <div class="container">
    <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarDefault"
            aria-controls="navbarDefault" aria-expanded="false" aria-label="Toggle navigation">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <a href="ownerUserIndex.html" class="logo">
      <img src="../styles/assets/images/Screenshot_2023-07-02_at_13.13.32-removebg.png" alt="" style="width: 250px;  ">
    </a>
    <button type="button" class="btn btn-link nav-search navbar-toggle-box-collapse d-md-none" data-toggle="collapse"
            data-target="#navbarTogglerDemo01" aria-expanded="false">
      <span class="fa fa-search" aria-hidden="true"></span>
    </button>
    <div class="navbar-collapse collapse justify-content-center" id="navbarDefault">


      <ul class="navbar-nav" >
        <li class="nav-item">
          <a class="nav-link" href="viewOwnerHouses.html" style="margin-left: 10px; margin-right: 10px; color: #FFFFFF; font-size: larger">Residences</a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="" style="margin-left: 10px; margin-right: 10px;color: #FFFFFF;font-size: larger">Dashboard</a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="HomePage.html" style="margin-left: 10px; margin-right: 10px; ">Log Out</a>
        </li>



      </ul>
    </div>
  </div>
</nav>

<div class="container-fluid" style="padding-top: 10rem;">
  <div class="row justify-content-center">
    <div class="col-11 col-sm-10 col-md-10 col-lg-6 col-xl-5 text-center p-0 mt-3 mb-2">
      <div class="card px-0 pt-4 pb-0 mt-3 mb-3">
        <h2 id="heading">Rent your property!</h2>
        <p>Fill all form field to go to next step</p>
        <form id="msform">
          <!-- progressbar -->
          <ul id="progressbar">
            <li class="active" id="account"><strong>Account</strong></li>
            <li id="personal"><strong>Personal</strong></li>
            <li id="payment"><strong>Image</strong></li>
            <li id="confirm"><strong>Finish</strong></li>
          </ul>
          <div class="progress">
            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
          </div> <br>

          <!-- fieldsets -->
          <fieldset>
            <div class="form-card">
              <div class="row">
                <div class="col-7">
                  <h2 class="fs-title">Account Information:</h2>
                </div>
                <div class="col-5">
                  <h2 class="steps">Step 1 - 4</h2>
                </div>
              </div>
              <label class="fieldlabels">Owner Email: *</label>
              <input type="email" name="email" id="ownerEmail" readonly />
            </div>
            <input type="button" name="next" class="next action-button" value="Next" />
          </fieldset>

          <fieldset>
            <div class="form-card">
              <div class="row">
                <div class="col-7">
                  <h2 class="fs-title">Personal Information:</h2>
                </div>
                <div class="col-5">
                  <h2 class="steps">Step 2 - 4</h2>
                </div>
              </div>

<div style="display: inline-block">
              <label class="fieldlabels">Country: *</label>
              <input type="text" name="country" placeholder="" id="country" required />

              <label class="fieldlabels">City: *</label>
              <input type="text" name="city" placeholder="" id="city" required>
              <label class="fieldlabels">Location: *</label>
              <input type="text" name="location" placeholder="Address, Street, etc..." id="location" required />


</div>

              <label class="fieldlabels">Floor number: *</label>
              <input type="number" name="floor#" placeholder="How many floors does the residence have?" id="floor" required />

              <label class="fieldlabels">Area:</label>
              <input type="number" name="area" placeholder="Enter the total area of your residence in square meter" id="area" required />

              <label class="fieldlabels">Description:</label>
              <input type="text" name="description" placeholder="Enter a slight description of your residence" id="disc"  required/>


            </div>
            <input type="button" name="next" class="next action-button" value="Next" id="nextButton5" style="margin-top: 10px" disabled  />
            <input type="button" name="previous" class="previous action-button-previous" value="Previous" />

            <script>
              var nextButtonTimeout; // Variable to store the timeout ID

              // Function to check if all required fields are valid
              function validateForm() {
                // Clear the previous timeout, if any
                clearTimeout(nextButtonTimeout);

                var country = document.getElementById("country");
                var city = document.getElementById("city");
                var location = document.getElementById("location");
                var floor = document.getElementById("floor");
                var area = document.getElementById("area");
                var disc = document.getElementById("disc");
                // Check if both password fields are equal

                // Check if all required fields have valid values
                var allFieldsValid =
                        country.reportValidity() &&
                        city.reportValidity() &&
                        location.reportValidity()&&
                        floor.reportValidity()&&
                        area.reportValidity()&&
                        disc.reportValidity();

                // Enable/disable the "Next" button based on the form's validation status after a small delay
                nextButtonTimeout = setTimeout(function () {
                  var nextButton = document.getElementById("nextButton5");
                  nextButton.disabled = !allFieldsValid;
                }, 200); // Set a 200ms delay (adjust as needed)
              }

              // Call the validateForm function whenever any input field loses focus
              document.getElementById("country").addEventListener("blur", validateForm);
              document.getElementById("city").addEventListener("blur", validateForm);
              document.getElementById("location").addEventListener("blur", validateForm);
              document.getElementById("floor").addEventListener("blur", validateForm);
              document.getElementById("area").addEventListener("blur", validateForm);
              document.getElementById("disc").addEventListener("blur", validateForm);

              // Call the validateForm function whenever any password field value changes

            </script>

          </fieldset>

          <fieldset>
            <div class="form-card">
              <div class="row">
                <div class="col-7">
                  <h2 class="fs-title">Image Upload:</h2>
                </div>
                <div class="col-5">
                  <h2 class="steps">Step 3 - 4</h2>
                </div>
              </div>
              <label class="fieldlabels">Upload Your Photo:</label>
              <input type="file" name="pic" accept="image/*" id="img" multiple required>

              <label class="fieldlabels">Price:</label>
              <input type="number" name="price" placeholder="Please note that the price is in USD (United States Dollar)" id="price"  required/>


              <div id="services-container">
                <label class="fieldlabels">Services:</label>
                <input type="text" name="service" placeholder="Enter a service" />
                <button type="button" id="add-service-btn">Add</button>
              </div>
            </div>
            <input type="button" name="next" class="next action-button" id="submitButton" value="Submit" style="margin-top: 10px" />
            <input type="button" name="previous" class="previous action-button-previous" value="Previous" />

            <script>
              var nextButtonTimeout; // Variable to store the timeout ID

              // Function to check if all required fields are valid
              function validateForm() {
                // Clear the previous timeout, if any
                clearTimeout(nextButtonTimeout);

                var img = document.getElementById("img");
                var id = document.getElementById("price");

                // Check if both password fields are equal

                // Check if all required fields have valid values
                var allFieldsValid =
                        img.reportValidity() &&

                        id.reportValidity();

                // Enable/disable the "Next" button based on the form's validation status after a small delay
                nextButtonTimeout = setTimeout(function () {
                  var nextButton = document.getElementById("submitButton");
                  nextButton.disabled = !allFieldsValid;
                }, 200); // Set a 200ms delay (adjust as needed)
              }

              // Call the validateForm function whenever any input field loses focus
              document.getElementById("img").addEventListener("blur", validateForm);
              document.getElementById("id").addEventListener("blur", validateForm);


              // Call the validateForm function whenever any password field value changes

            </script>

          </fieldset>

          <fieldset>
            <div class="form-card">
              <div class="row">
                <div class="col-7">
                  <h2 class="fs-title">Finish:</h2>
                </div>
                <div class="col-5">
                  <h2 class="steps">Step 4 - 4</h2>
                </div>
              </div>
              <br><br>
              <h2 class="purple-text text-center"><strong>SUCCESS !</strong></h2>
              <br>
              <div class="row justify-content-center">
                <div class="col-3">
                  <img src="https://t4.ftcdn.net/jpg/02/72/79/67/360_F_272796737_1gfclSQF8yzFHZeE2XX5513eOQMV53dw.jpg" class="fit-image">
                </div>
              </div>
              <br><br>
              <div class="row justify-content-center">
                <div class="col-7 text-center">
                  <h5 class="purple-text text-center">You Have Successfully Signed Up</h5>
                </div>
              </div>
            </div>
          </fieldset>
        </form>
      </div>
    </div>
  </div>
</div>

<footer class="footer-distributed">

  <div class="footer-left">

    <a  class="logo">
      <img src="Screenshot_2023-07-02_at_13.13.32-removebg.png" alt="" style="width: 250px;  ">
    </a>



    <p class="footer-company-name" style="color: #FFFFFF;padding-top: 3rem ">Sakancom Â© 2015</p>
  </div>

  <div class="footer-center">

    <div>
      <i class="fa fa-map-marker"></i>
      <p><span>Rafedyia Street</span> Nablus, Palestine</p>
    </div>

    <div>
      <i class="fa fa-phone"></i>
      <p>+972595254709</p> </br>
      <p style="padding-left: 4.5rem">+970598666558</p>
    </div>

    <div>
      <i class="fa fa-envelope"></i>
      <p><a href="mailto:yossalam261@gmail.com">yossalam261@gmail.com</a></p></br>
      <p style="padding-left: 4.5rem"><a href="mailto:mohammadaker7@gmail.com">mohammadaker7@gmail.com</a></p>
    </div>

  </div>

  <div class="footer-right">

    <p class="footer-company-about">
      <span>About the company</span>
      Sakancom offers a diverse range of rental properties to suit every budget. With a commitment to service and transparency, we make finding your perfect home easy and enjoyable
    </p>

    <div class="footer-icons">

      <a href="https://www.facebook.com/yusuf.salam.568/"><i class="fa fa-facebook"></i></a>
      <a href="https://twitter.com/YoSSalam2"><i class="fa fa-twitter"></i></a>
      <a href="https://www.linkedin.com/in/yossalam8/"><i class="fa fa-linkedin"></i></a>
      <a href="https://github.com/YoSSalam8"><i class="fa fa-github"></i></a>

    </div>

  </div>

</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="../multi-step-form/dist/script.js"></script>
<script>
  document.getElementById("ownerEmail").value=getCookie("userEmail");


  $(document).ready(function(){
    var services = [];
    var images = [];

    function addService(service) {
      if (service) {
        services.push(service);
      }
    }

    $("#add-service-btn").click(function(){
      var service = $("input[name='service']").val();
      addService(service);
      $("input[name='service']").val("");
    });

    $("input[name='pic']").on("change", function(e) {
      var files = e.target.files;
      for (var i = 0; i < files.length; i++) {
        var file = files[i];
        var reader = new FileReader();

        reader.onload = (function(f) {
          return function(e) {
            var image = e.target.result;
            images.push(image);
          };
        })(file);

        reader.readAsDataURL(file);
      }
    });

    $("#submitButton").click(function(){
      var email = $("input[name='email']").val();
      var location = $("input[name='location']").val();
      var price = $("input[name='price']").val();
      var floorNum = $("input[name='floor#']").val();
      var description = $("input[name='description']").val();
      var area = $("input[name='area']").val();
      var country = $("input[name='country']").val();
      var city = $("input[name='city']").val();

      var addResidence = "http://localhost:9090/residence/saveResidence";

      var formData = {
        ownerEmail: email,
        price: price,
        location: location,
        description: description,
        area: area,
        city: city,
        country: country,
        floorCount: floorNum,
        services: services,
        images: images
      };

      $.ajax({
        data: JSON.stringify(formData),
        url: addResidence,
        contentType: "application/json; charset=utf-8",
        type: "POST",
        success: function(data) {
          console.log('Form submitted successfully. Returned data:', data);
        },
        error: function(request, status, error) {
          console.error();
        }
      });
    });
  });




  function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
      var c = ca[i];
      while (c.charAt(0) === ' ') {
        c = c.substring(1, c.length);
      }
      if (c.indexOf(nameEQ) === 0) {
        return decodeURIComponent(c.substring(nameEQ.length, c.length));
      }
    }
    return null;
  }

</script>
</body>
</html>
